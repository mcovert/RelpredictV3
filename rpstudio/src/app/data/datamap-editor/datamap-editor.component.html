<app-file-loader (readFile)="readFile($event)" (cancelFile)="cancelFile()"></app-file-loader>
<br><br>
  <form #parmform="ngForm">
         <h3 class="bg-info text-center">Edit Datamap</h3>
      <div class="row">
         <label class="col-2 text-center" for="dmname">Name</label>
         <input type="text" class="form-control col-3" id= "username" name="dmname" required [(ngModel)]="newdm.datamap_name"/>
         <label class="col-2 text-center" for="dmname">Type</label>
         <select class="form-control col-2" name=dmtype [(ngModel)]="newdm.datamap_type"> 
              <option *ngFor="let dmt of datamapTypes; let di=index" value="dmt[0]">{{dmt}}</option>
         </select>
         <button class="btn btn-primary btn-sm col-2" style="float:right" (click)="newField()">New Field</button>
         <div class="col-1"></div>
      </div>
      <br>
      <div class="table-responsive">
        <table id="mytable2" class="table table-bordered table-striped sortable table-sm">
          <thead>
               <th class="text-center">Field Name</th>
               <th class="text-center">Field Type</th>
          </thead>
          <tbody>
               <tr *ngFor="let fd of newdm.fields; let i=index;">
                   <td>
                     <input type="text" class="form-control col-12" id= fn{{index}} value="fd.field_name" name=fdn{{index}} [(ngModel)]="fd.field_name">
                  </td>
                   <td>
                      <select class="form-control" name=ftsel{{index}} [(ngModel)]="fd.field_type"> 
                        <option *ngFor="let dt of dataTypes" value="{{dt.datatype_name}}">{{dt.datatype_name}}</option>
                      </select>
                   </td>
               </tr>
          </tbody>
        </table>
      </div>
  </form>
   <div class="row p-1">
         <div class="col-5 pt-3"></div>
         <p data-placement="top" data-toggle="tooltip" title="Discard Changes">
          <button class="btn btn-danger btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#cancel" (click)="cancel()">
                  <span class="fa fa-ban"></span>
          </button>
         </p>
         <p data-placement="top" data-toggle="tooltip" title="Save Changes">
          <button class="btn btn-info btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#save" (click)="save()">
                  <span class="fa fa-floppy-o"></span>
          </button>
         </p>
         <p data-placement="top" data-toggle="tooltip" title="Reset to defaults">
          <button class="btn btn-danger btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#reset" (click)="reset()">
                  <span class="fa fa-refresh"></span>
          </button>
         </p>
         <div class="col-4"></div>
   </div>
