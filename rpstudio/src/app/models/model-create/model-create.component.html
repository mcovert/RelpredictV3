<wizard #wizard navBarLayout="large-empty-symbols">
  <wizard-step stepTitle="Define the new model" navigationSymbol="&#xf044;" navigationSymbolFontFamily="FontAwesome">
    <form>
      <br>
      <h2 class="text-center">Define the model</h2>
      <br>
      <div class="row">
        <div class="col-2"></div>
        <div class="col-8">
            <div class="form-group">
              <label class="col-2" for="modelName">Model Name</label>
              <input class="col-4" type="text" id="modelName" [(ngModel)]="model.name" name="name">
            </div>    
            <div class="form-group">
              <label class="col-2" for="modelClass">Model Class</label>
              <select>
                 <option *ngFor="let mc of modelClasses" value={{mc.label}}>{{mc.label}}</option>
              </select>
                 <!--input class="col-4" type="text" id="modelClass" [(ngModel)]="model.model_class" name="model_class"-->
            </div>    
            <div class="form-group">
              <label class="col-2" for="modelVersion">Version</label>
              <input class="col-1" type="text" id="modelVersion" [(ngModel)]="model.version" disabled="true" name="version">
            </div>    
            <div class="form-group">
              <label class="col-2" for="modelDescription" >Description</label>
              <input class="col-8" type="text" id="modelDescription" [(ngModel)]="model.description" name="description">
            </div>  
        </div>
        <div class="col-2"></div>  
      </div>
    </form>
    <div class="text-center">
       <button type="button" nextStep class="btn btn-sm btn-primary">Next Step</button>
    </div>
  </wizard-step>
  <wizard-step stepTitle="Add Features" navigationSymbol="&#xf03a;" navigationSymbolFontFamily="FontAwesome">
    <form>
      <div class="container-fluid">
      <br>
      <div class="row">
        <div class="col-2"></div>
        <h2 class="text-center col-8">Add features to the model</h2>
        <div class="dropdown col-2" style="float:right">
         <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown">Add Feature<span class="caret"></span></button>
         <div class="dropdown-menu">
           <a class="dropdown-item" (click)="addFeature()">New Feature</a>
           <a class="dropdown-item" href="#">From DataMap</a>
           <a class="dropdown-item" href="#">From file</a>
         </div>
       </div>
      </div>
      <br>
        <div class="table-responsive">
        <table id="mytable" class="table table-bordered table-striped sortable table-sm">
          <thead>
               <!--th class="text-center">Target</th-->
               <th class="text-center">Name</th>
               <th class="text-center">Type</th>
               <th class="text-center">Label</th>
               <th class="text-center">Parameters</th>
               <th class="text-center">Parameter Editor</th>
               <th class="text-center">Delete</th>
          </thead>
          <tbody>
            <tr *ngFor="let f of model.features; let index = index; trackBy:trackByIndex">
               <!--td class="text-center">
                 <input type="checkbox" [(ngModel)]="model.features[index].isTarget" name=isTraget{{index}} ngModel>
               </td-->
               <td >
                 <input class="form-control" type="text" [(ngModel)]="model.features[index].name" name=name{{index}} ngModel>
               </td>
               <td >
                 <select class="form-control" (change)="changeFeatureDataType($event.target.value, index)"> 
                   <option *ngFor="let dt of dataTypes" value="{{dt.datatype_name}}">{{dt.datatype_name}}</option>
                 </select>
               </td>
               <td >
                 <input class="form-control"  type="text" [(ngModel)]="model.features[index].label" name=label{{index}} ngModel>
               </td>
               <td >
                    <input class="form-control"  type="text" name="parms">
               </td>
               <td class="text-center">
                    <p data-placement="top" data-toggle="tooltip" title="Show Parameter Editor">
                       <button class="btn btn-info btn-xs center-block" (click)="showParmEditor(f.type)">
                        <span class="fa fa-bars"></span>
                      </button>
                    </p>
              </td>
              <td class="text-center">
                    <p data-placement="top" data-toggle="tooltip" title="Delete Feature">
                       <button class="btn btn-danger btn-xs center-block" data-title="Delete" data-toggle="modal" data-target="#delete" (click)="deleteFeature(index)">
                        <span class="fa fa-trash"></span>
                       </button>
                    </p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    </form>
    <br>
    <br>
    <div class="text-center">
      <button type="button" previousStep class="btn btn-sm btn-danger">Go to previous step</button>
      <button type="button" nextStep class="btn btn-sm btn-primary">Add Targets</button>
    </div>
  </wizard-step>
  <wizard-step stepTitle="Add Targets" navigationSymbol="&#xf140;" navigationSymbolFontFamily="FontAwesome">
    <form>
      <div class="container-fluid">
      <br>
      <div class="row">
        <div class="col-2"></div>
        <h2 class="text-center col-8">Add targets to the model</h2>
        <button type="button" class="btn btn-sm btn-primary" (click)="addTarget()">Add Target</button>
      </div>
      <br>
        <div class="table-responsive">
        <table id="mytable" class="table table-bordered table-striped sortable table-sm">
          <thead>
               <!--th class="text-center">Target</th-->
               <th class="text-center">Name</th>
               <th class="text-center">Type</th>
               <th class="text-center">Description</th>
               <th class="text-center">Parameters</th>
               <th class="text-center">Parameter Editor</th>
               <th class="text-center">Algorithms</th>
               <th class="text-center">Add Algorithm</th>
               <th class="text-center">Delete</th>
          </thead>
          <tbody>
            <tr *ngFor="let t of model.targets; let index = index; trackBy:trackByIndex">
               <!--td class="text-center">
                 <input type="checkbox" [(ngModel)]="model.features[index].isTarget" name=isTraget{{index}} ngModel>
               </td-->
               <td >
                 <input class="form-control" type="text" [(ngModel)]="t.name" name=name{{index}} ngModel>
               </td>
               <td >
                 <select class="form-control" (change)="changeTargetDataType($event.target.value, index)"> 
                   <option *ngFor="let dt of dataTypes" value="dt.name">{{dt.datatype_name}}</option>
                 </select>
               </td>
               <td >
                 <input class="form-control"  type="text" [(ngModel)]="t.description" name=label{{index}} ngModel>
               </td>
               <td >
                    <input class="form-control"  type="text" name="parms">
               </td>
               <td class="text-center">
                    <p data-placement="top" data-toggle="tooltip" title="Show Parameter Editor">
                       <button class="btn btn-info btn-xs center-block" (click)="showParmEditor(t.parms)">
                        <span class="fa fa-bars"></span>
                      </button>
                    </p>
              </td>
              <td class="text-center">
                    <select class="form-control"> 
                         <option *ngFor="let ad of algDefs" value="dt.name">{{ad.name}}</option>
                    </select>
              </td>
              <td class="text-center">
                    <p data-placement="top" data-toggle="tooltip" title="Add Algorithm">
                        <button class="btn btn-info btn-xs center-block" (click)="showAlgEditor()">
                        <span class="fa fa-plus"></span>
                    </button></p>
              </td>
              <td class="text-center">
                    <p data-placement="top" data-toggle="tooltip" title="Delete Target">
                        <button class="btn btn-danger btn-xs center-block" data-title="Delete" data-toggle="modal" data-target="#delete" (click)="deleteTarget(index)">
                        <span class="fa fa-trash"></span>
                    </button></p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      </div>
    </form>
    <br>
    <br>
    <div class="text-center">
      <button type="button" previousStep class="btn btn-sm btn-danger">Previous Step</button>
      <button type="button" nextStep class="btn btn-sm btn-primary">Finish</button>
    </div>
  </wizard-step>
  <wizard-step stepTitle="Complete" navigationSymbol="&#xf00c;" navigationSymbolFontFamily="FontAwesome">
    <div class="text-center">
      <button type="button" previousStep class="btn btn-sm btn-primary">Previous Step</button>
      <button type="button" class="btn btn-sm btn-success" resetWizard (click)="saveModel()">Save Model</button>
      <button type="button" class="btn btn-sm btn-danger" resetWizard (click)="cancelModel()">Discard and Exit</button>
    </div>
  </wizard-step>
</wizard>
<app-modal-dialog [(visible)]="showParm">
  <form>
      <h3 class="bg-info text-center">Enter Parameters</h3>
      <div class="table-responsive">
        <table id="mytable2" class="table table-bordered table-striped sortable table-sm">
          <thead>
               <th class="text-center">Parameter Name</th>
               <th class="text-center">Parameter Value</th>
          </thead>
          <tbody>
               <tr *ngFor="let c of content; let index=index;">
                   <td>{{c.label}}</td>
                   <td>
                       <div *ngIf="c.parm_type=='choose'">
                           <select class="form-control text-center"> 
                               <option *ngFor="let v of c.choose" value="v">{{v}}</option>
                           </select>
                       </div>
                       <div *ngIf="c.parm_type=='value'">
                           <input class="form-control"  type="text" [value]="c.parm_default">
                       </div>
                       <div *ngIf="c.parm_type=='range'">
                           <input class="form-control"  type="text" [value]="c.parm_default">
                       </div>
                   </td>
               </tr>
          </tbody>
        </table>
      </div>
  </form>
   <div class="row p-1">
         <div class="col-5 pt-3"></div>
         <p data-placement="top" data-toggle="tooltip" title="Discard Changes">
          <button class="btn btn-danger btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#cancel" (click)="cancelDialog()">
                  <span class="fa fa-ban"></span>
          </button>
         </p>
         <p data-placement="top" data-toggle="tooltip" title="Save Changes">
          <button class="btn btn-info btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#save" (click)="saveDialog()">
                  <span class="fa fa-floppy-o"></span>
          </button>
         </p>
         <p data-placement="top" data-toggle="tooltip" title="Reset to defaults">
          <button class="btn btn-danger btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#reset" (click)="resetDialog()">
                  <span class="fa fa-refresh"></span>
          </button>
         </p>
         <div class="col-4"></div>
   </div>
</app-modal-dialog>
<app-modal-dialog [(visible)]="showAlg">
  <form>
      <h3 class="bg-info text-center">Add Algorithm</h3>
      <select class="form-control"> 
           <option *ngFor="let ad of algDefs" value="dt.name">{{ad.name}}</option>
      </select>
      <div class="table-responsive pt-1">
        <table id="mytable2" class="table table-bordered table-striped sortable table-sm">
          <thead>
               <th class="text-center">Parameter Name</th>
               <th class="text-center">Parameter Value</th>
          </thead>
          <tbody>
               <tr *ngFor="let c of content; let index=index;">
                   <td>{{c.parm_name}}</td>
                   <td>
                       <select class="form-control text-center"> 
                           <option *ngFor="let v of c.parm_values" value="v">{{v}}</option>
                       </select>
                   </td>
               </tr>
          </tbody>
        </table>
      </div>
  </form>
   <div class="row p-1">
         <div class="col-5 pt-3"></div>
         <p data-placement="top" data-toggle="tooltip" title="Discard Changes">
          <button class="btn btn-danger btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#cancel" (click)="cancelDialog()">
                  <span class="fa fa-ban"></span>
          </button>
         </p>
         <p data-placement="top" data-toggle="tooltip" title="Save Changes">
          <button class="btn btn-info btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#save" (click)="saveDialog()">
                  <span class="fa fa-floppy-o"></span>
          </button>
         </p>
         <p data-placement="top" data-toggle="tooltip" title="Reset to defaults">
          <button class="btn btn-danger btn-xs center-block" data-title="Cancel" data-toggle="modal" data-target="#reset" (click)="resetDialog()">
                  <span class="fa fa-refresh"></span>
          </button>
         </p>
         <div class="col-4"></div>
   </div>
</app-modal-dialog>